# 템플릿/콜백 패턴

* 템플릿: 템플릿 메소드 페턴은 고정된 틀의 로직을 가진 템플릿 메소드를 슈퍼클래스에 두고, 
  바뀌는 부분을 서브클래스의 메소드에 두는 구조로 이뤄진다.


* 콜백: 실행되는 것을 목적으로 다른 오브젝트의 메소드에 **전달되는 오브젝트**를 말한다.
  파라미터로 전달되지만 값을 참조하기 위함이 아니라 특정 로직의 메서드를 실행하기 위해 사용한다.
  - 자바에서는 메소드 자체를 파라미터로 전달할 방법이 없으므로 메소드가 담긴 오브젝트를 전달한다.

여러 개의 메소드를 일반적인 인터페이스를 사용할 수 있는 전략 패턴의 전략과 달리
템플릿/콜백 패턴의 콜백은 보통 단일 메소드 인터페이스를 사용한다.

## 템플릿/콜백 패턴의 일반적인 작업 흐름

```mermaid
sequenceDiagram
  participant 클라이언트
  participant 템플릿
  note right of 클라이언트: (1) 콜백(Callback) 생성
  클라이언트->>템플릿: (2) Callback 전달 / Template 호출
  note left of 템플릿: (3) Workflow 시작
  note left of 템플릿: (4) 참조정보 생성
  템플릿->>클라이언트: (5) Callback 호출 / 참조정보 전달
  note right of 클라이언트: (6) 콜백에서 Client final 변수 참조
  note right of 클라이언트: (7) 콜백에서 작업 수행
  클라이언트->>템플릿: (8) Callback 작업 결과
  note left of 템플릿: (9) Workflow 진행
  템플릿->>클라이언트: (11) 템플릿의 작업 결과
```

- 콜백을 Strategy로, 템플릿을 Context라고 놓고 보자.
- DI 방식의 전략 패턴 구조라고 생각하고 보면 간단하다.